<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <title>Polymer</title>


    <script src="js/html2canvas.js"></script>

    <script  src="https://code.jquery.com/jquery-3.2.1.min.js"  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>

    <!-- BOOTSTRAP 4 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>

    <link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">
    <link rel="import" href="../nowy-element.html">

    <custom-style>
      <style is="custom-style" include="demo-pages-shared-styles">
      </style>
    </custom-style>

  <style>
        body, html {
            height: 100%;
        }
        .bg {
            background-image: url("images/bg.jpg");
            height: 100%;
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
        }
  </style>

      <script>


// To tworzy screena w nowym oknie Mozilli, w Chrome puste okno.
        function getScreen() {
            var caption = $('#caption-input').val();
            $("#caption-text").html(caption);
            html2canvas(document.body).then(function(canvas) {

    var base64image = canvas.toDataURL("image/png");


    window.open(base64image , "_blank");
});

        }


// Przykład, gdzie w Chrome nie znajduje pliku convert.php zaś Mozilla cicho siedzi.

/*
        function getScreen() {
  $('.element').css('position','initial'); 
  $my_view = $('#my-view');
  var useHeight = $('#my-view').prop('scrollHeight');
  html2canvas(document.body, {
    height: useHeight,
    useCORS: true,
    allowTaint: true,
    onrendered: function (canvas) {
        var imgSrc = canvas.toDataURL("image/png");
        var output = imgSrc.replace(/^data:image\/(png|jpg);base64,/, "");
        console.log("jestem");
        $.ajax({
        	url: "/convert.php",
        	data: {
        		output:output
        	},
            type: "POST",
            success : function(response)
                {
                    console.log(response);
                    $('#image_id img').attr('src', response);
                }
    });
}
});
}
*/

        	/*
            var caption = $('#caption-input').val();
            $("#caption-text").html(caption);
            html2canvas(document.body, {
                dpi: 192,
                onrendered: function(canvas) {
                    $("#blank").attr('href', canvas.toDataURL("/images"));
                    $("#blank").attr('download', caption + '.png');
                    $("#blank")[0].click();
                }
            });
}
*/
/*
function getScreen(){
const Screenshot = require('.')
const fs = require('fs')
 
new Screenshot('http://ghub.io/')
  .width(320)
  .height(320)
  .clip()
  .capture()
  .then(img => {
    fs.writeFileSync(__dirname + '/example.png', img)
    console.log('open example.png')
  })
}
*//*
        function getScreen() {
            var caption = $('#caption-input').val();
            $("#caption-text").html(caption);
            $("#panel").hide();
            html2canvas(document.body).then(function(canvas) {
    // Export the canvas to its data URI representation
    var base64image = canvas.toDataURL("image/png");

    // Open the image in a new window
    window.open(base64image , "_blank");
    */
/*
       var output = base64image.replace(/^data:image\/(png|jpg);base64,/, "");
        console.log("jestem");
        $.ajax({
            url: "/components/nowy-element/demo/convert.php",
            data: {
                output:output
            },
            type: "POST",
            success : function(response)
                {
                    console.log(response);
                    $('#image_id img').attr('src', response);
                }
    });
    */
    </script>


  </head>
 
<body class="bg">
 
    <div class="vertical-section-container centered">
      <h3>Przykładowy polimer:</h3>
      <demo-snippet>
        <template>
          <nowy-element></nowy-element>
        </template>
      </demo-snippet>

      <div class="col-md-6 offset-md-3" style="background: white; float: left; padding: 20px;">
                <p style="font-style: italic;">Za pomocą poniższego przycisku zrobisz screena.</p>
                <br>
                <a href="javascript:getScreen();" class="btn btn-lg btn-block btn-outline-success">Zrób to.</a>
                <a href="" id="blank"></a>
                <br>
      </div>
<br><br><br>
<div id="text" style="background: #FFCCFF;  padding: 20px; opacity: 0.5;">
Zimorodek
(Alcedo atthis)
rodzina: zimorodkowate
Długość ciała: 16-18 cm. Jeden z najbarwniejszych naszych ptaków. Wierzch ciała niebieskozielony z turkusowym grzbietem i ogonem. Spód ciała i policzki rdzawobrązowe a gardło białe. Ma nieproporcjonalnie długi i mocny dziób oraz bardzo krótkie nogi i ogon. Mimo swego jaskrawego ubarwienia niełatwo go zauważyć gdy w bezruchu czatuje na zdobycz. Łowi ryby i wodne owady rzucając się do wody z nadwodnego posterunku. Lata szybkim, prostoliniowym lotem, zwykle nisko nad wodą, odzywając się wysokim przenikliwym głosem
</div>
  </body>
</html>